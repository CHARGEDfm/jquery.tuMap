(function(d){var f={defaults:{MapId:null,MapSet:"tu",MapType:"Interactive",EventId:null,AutoSwitchToStatic:true,SeatingChartAutoCorrect:true,FailoverMapUrl:null,Columns:{flag:{Title:"",Sortable:false,Visible:false,Width:50,Formatter:function(i,g,j){var h="";if(i.preferred){h+='<span class="tuMapPreferred"></span>'}if(i.eticket){h+='<span class="tuMapeTicket"></span>'}return h}},section:{Title:"Section",Sortable:true,Width:150,SortType:"string",Visible:true},row:{Title:"Row",Sortable:true,SortType:"string",Visible:true},quantity:{Title:"Quantity",Sortable:true,SortType:"numeric",Visible:true,Formatter:function(i,g,j){var h="";if(typeof(j)=="object"){var h='<select lang="Quantity">';d.each(j,function(l,k){h+="<option>"+k+"</option>"});h+="</select>"}else{h=j+'<input type="hidden" value="'+j+'" lang="Quantity"/>'}return h}},price:{Title:"Price",Sortable:true,SortType:"numeric",Visible:true},notes:{Title:"",Width:35,Sortable:false,Visible:true,Formatter:function(h,g,i){if(i!=""){return'<span class="Notes" title="'+i+'"></span>'}return""}},action:{Title:"",Sortable:false,Visible:true,Formatter:function(h,g,i){return'<a class="BuyLink" href="javascript:void(0);" lang="'+h.id+'">'+f.Settings.BuyButtonText+"</a>"}}},DisplayListHeader:true,PreferredFirst:false,Tickets:[],TicketsFilter:{MinPrice:0,MaxPrice:0,Quantity:0,Ids:null},TicketsSort:{Column:"section",Order:"ASC",SortType:"string"},TicketsListContainer:null,SectionViewContainer:null,SectionViewTrigger:"mouseover",TooltipSectionViewSize:"250",EnableTooltipSectionView:true,AlwaysShowTooltip:false,AnimateTooltip:false,SingleSectionSelection:false,RowSelector:null,SectionSelector:null,RowNumberSelector:null,PriceSelector:null,QuantitySelector:null,eTicketSelector:null,BuyButtonText:"Select",PreferredText:"Display Preferred Inventory First",ResetButtonText:"Reset",GroupsContainer:null,ControlsPosition:"Inside",ZoomLevel:3,AdaptiveThreshold:1,MaxZoom:0,BgColor:"#FFFFFF",ServiceUrl:"http://imap.ticketutils.net",OnInit:null,OnBeforeListRender:null,OnAfterListRender:null,OnClick:null,OnGroupClick:null,OnMouseover:null,OnMouseout:null,OnError:null,OnReset:null,OnTicketSelected:null,OnControlClick:null,ColorScheme:0,HighlightStyle:{strokeWeight:2,fillColor:"#0000FF",fillOpacity:0.2},NormalStyle:{fillOpacity:0,fillColor:"#FFFFFF",strokeColor:"#FFFFFF",strokeWeight:0},SelectedStyle:{strokeWeight:2,fillColor:"#FFFFFF",fillOpacity:0.3},InactiveStyle:{strokeColor:"#FFFFFF",strokeWeight:0,fillColor:"#666666",fillOpacity:0.7},NoResultsFormatter:function(){return"No Tickets Found"},TooltipFormatter:function(i){var g='<div style="width:'+f.Settings.TooltipSectionViewSize+'px;">';var h=i.LongName;g+='<span class="SectionColor" style="background-color:'+i.Group.Color+';"></span>';g+='<span class="Title">'+h+"</span>";if(i.RowDetails!=""){g+='<span class="RowDetails">Row: '+i.RowDetails+"</span>"}g+='<span class="SectionViewClose"></span><br/>';if(i.SectionViewThumbnailUrl){f.ShowSectionView(i.Key,"mouseover");if(f.Settings.EnableTooltipSectionView){g+='<img src="'+i.SectionViewThumbnailUrl+'" alt="'+h+'" style="width:100%;height:'+Math.round(f.Settings.TooltipSectionViewSize/2)+'px"/>';g+='<div class="SectionViewZoom"></div>';g+="<br/>";g+='<div style="color:#666666;font-size:9px;padding-bottom:5px;">Approximate view from this section. May differ based on row, seat, camera or obstructions.</div>'}}if(i.Active){if(i.Quantity>0){g+='<span class="tuMapHighlight">'+i.Quantity+"</span> ticket"+(i.Quantity>1?"s":"")+" available from "+i.MinPrice+(i.MinPrice!=i.MaxPrice?" to "+i.MaxPrice:"")}}else{g+="No Tickets currently available for this Section"}g+="</div>";return g}},Container:null,Map:null,Groups:{},Sections:{},Selection:[],ParkingFlag:false,PreferredFlag:false,eTicketFlag:false,ConvertZoom:function(g){if(!g){g=f.Settings.ZoomLevel-1}if(e.Resolutions.length>g){return e.Resolutions[g]/100}else{e.Zoom=e.Resolutions.length-1;return e.Resolutions[e.Resolutions.length-1]/100}},ZoomIn:function(){return e.ZoomIn()},ZoomOut:function(){return e.ZoomOut()},Reset:function(){f.HideSectionView("click");e.Wrapper.trigger("OnReset")},SetOptions:function(g){d.each(g,function(h,l){f.Settings[h]=l;switch(h){case"Tickets":case"Columns":if(f.RefreshType!="Reset"){f.RefreshType="ProcessTickets"}break;case"PreferredFirst":case"TicketsSort":if(f.RefreshType!="Reset"&&f.RefreshType!="ProcessTickets"){f.RefreshType="SortTickets"}break;case"PreferredText":case"TicketsFilter":var n=f.Settings.TicketsFilter.Quantity;var o=0;var k="eq";if(typeof(f.Settings.TicketsFilter.Quantity)=="string"){var i=f.Settings.TicketsFilter.Quantity.indexOf("-");if(i!=-1){n=f.Settings.TicketsFilter.Quantity.substring(0,i);o=f.Settings.TicketsFilter.Quantity.substring(i+1);k="bt"}else{n=f.Settings.TicketsFilter.Quantity.replace(/[^0-9]+/g,"").toString();var m=d.trim(f.Settings.TicketsFilter.Quantity.replace(n,""));if(m=="+"){k="gt"}}}var j={MinPrice:parseFloat(f.Settings.TicketsFilter.MinPrice),MaxPrice:parseFloat(f.Settings.TicketsFilter.MaxPrice),Quantity:parseInt(n),MaxQuantity:parseInt(o),Comparison:k,eTicket:f.Settings.TicketsFilter.eTicket,Ids:(f.Settings.TicketsFilter.Ids!=null&&f.Settings.TicketsFilter.Ids.length>0?f.Settings.TicketsFilter.Ids:null)};f.Settings.TicketsFilter=j;if(f.RefreshType!="Reset"){f.RefreshType="ProcessTickets"}break;case"ZoomLevel":e.Zoom=f.Settings.ZoomLevel;e.CheckMaxZoom();e.SetZoom(f.ConvertZoom());break;case"EventId":case"MapId":case"MapSet":case"MapType":case"Columns":case"TicketsListContainer":case"GroupsContainer":case"TooltipFormatter":f.RefreshType="Reset";break}});return this},AddMapControl:function(i,g,h){e.AddMapControl(i,g,h)},RemoveMapControl:function(g){d(".tuMapControl").each(function(){if(d.trim(d(this).html()).toLowerCase()==g.toLowerCase()){d(this).remove();if(f.Settings.ControlsPosition=="Inside"){e.ControlsContainer.css("margin-left",0-parseInt(e.ControlsContainer.width()/2))}return false}})},GetSelectedSections:function(h){var g=[];d.each(f.Selection,function(m,j){var l=f.Sections[j];var i=null;if(l){if(h){if(h.IncludeGroupName){var k=f.Groups[l.GroupId];g.push(l.LongName)}else{g.push(l.Name)}return}else{i=l.Mappings}}else{if(f.OtherSections[j]){if(h){g.push(f.OtherSections[j].Name);return}else{i=f.OtherSections[j].Mappings}}}d.each(i,function(o,n){g.push(n)})});return g},GetSections:function(h){var g=[];d.each(f.Sections,function(j,i){if(h&&i.Alias.length==0){return}g.push({Active:i.Active,Selected:i.Selected,Key:i.Key,Name:i.Name,DisplayName:i.DisplayName,DisplayGroupName:i.DisplayGroupName,Alias:i.Alias,ExactMatchAlias:i.ExactMatchAlias,Group:f.Groups[i.GroupId],SectionViewAvailable:i.IsSectionViewAvailable,SectionViewThumbnailUrl:i.SectionViewThumbnailUrl,SectionViewUrl:i.SectionViewUrl})});return g},GetOtherSections:function(){var g=[];d.each(f.OtherSections,function(i,h){g.push({Name:h.Name,Alias:h.Alias,Enabled:h.Enabled,IsExactMatch:h.IsExactMatch})});return g},GetSectionsInGroup:function(h,i,g){d.each(f.Sections,function(j,k){if(k==null){return}if(k&&k.GroupId==h){if(i!=null&&i.OnlyActive&&!k.Active){return}if(i!=null&&i.OnlyUnselected&&k.Selected){return}g(j,k)}})},HighlightGroup:function(g){this.GetSectionsInGroup(g,{OnlyActive:true,OnlyUnselected:true},function(h,i){i.SetStyle(f.Settings.HighlightStyle)});return this},ResetGroup:function(g){this.GetSectionsInGroup(g,{OnlyActive:true,OnlyUnselected:true},function(h,i){i.SetStyle(f.Settings.NormalStyle)});return this},HighlightSection:function(g,i){if(!i){g=f.GetSectionKey(g)}var h=f.Sections[g];if(h!=null){e.Trigger("OnMouseOver",f.Sections[g])}return this},ResetSection:function(g,i){if(!i){g=f.GetSectionKey(g)}var h=f.Sections[g];if(h!=null){e.Trigger("OnMouseOut",f.Sections[g])}return this},BlinkTimer:null,BlinkState:1,Blink:function(){var g=f.Settings.HighlightStyle;if(f.BlinkState==1){g=f.Settings.SelectedStyle;f.BlinkState=0;d(".tuMapControlSelected").addClass("tuMapControlBlink").removeClass("tuMapControlSelected")}else{f.BlinkState=1;d(".tuMapControlBlink").addClass("tuMapControlSelected").removeClass("tuMapControlBlink")}d.each(f.Selection,function(j,h){var i=f.Sections[h];if(i!=null){i.SetStyle(g)}})},FilterTickets:function(g,h,k,j){if(!k){if(f.Selection.length>0){d.each(f.Selection,function(l,m){if(f.Sections[m]){f.Sections[m].Selected=false}});f.Selection=[];clearInterval(f.BlinkTimer);f.BlinkTimer=null}g=f.GetSectionKey(g)}if(h){f.Selection.push(g);if(f.BlinkTimer==null){f.BlinkTimer=setInterval(f.Blink,500)}}else{var i=-1;while((i=d.inArray(g,f.Selection))>-1){f.Selection.splice(i,1)}if(f.Selection.length==0){clearInterval(f.BlinkTimer);f.BlinkTimer=null}}if(!j){f.ProcessTickets();f.SortTickets();f.ShowTickets()}},AddMarker:function(g,j){var i=g.Section;if(!j){i=f.GetSectionKey(g.Section)}var h=f.Sections[i];if(h){h.AddMarker(g.Url,h.GetCenter(),g.Offset)}},RemoveMarker:function(h,i){if(!i){h=f.GetSectionKey(h)}var g=f.Sections[h];if(g){g.RemoveMarker(g.GetCenter())}},ToggleSelection:function(j,k,g){if(f.Settings.SingleSectionSelection&&f.Selection.length>0){var h=f.Selection[0];f.Selection.length=0;f.ToggleSelection(h,true,true)}if(!k){j=f.GetSectionKey(j)}var i=f.Sections[j];if(!i||!i.Active){return}if(i.Selected){if(f.Settings.GroupsContainer!=null){f.ZoneSelected=false;f.Groups[i.GroupId].Selected=false}if(f.Selection.length==0){f.HideSectionView("click")}else{f.ShowSectionView(j,"click")}}else{f.ShowSectionView(j,"click")}i.Selected=!i.Selected;f.FilterTickets(j,i.Selected,true,g);return this},ToggleAll:function(){d.each(f.Sections,function(h,g){f.ToggleSelection(g.Key,true,true)});f.ProcessTickets();f.SortTickets();f.ShowTickets()},ProcessTickets:function(){var j=(f.Settings.TicketsListContainer==null&&(f.Settings.Tickets==null||f.Settings.Tickets.length==0)&&f.Settings.RowSelector==null);d.each(f.Sections,function(m,n){n.Active=j;n.FilteredTickets=0;n.MinPrice=9007199254740992;n.MaxPrice=0;n.MinPriceValue="";n.MinPriceValue="";n.Quantity=0;n.SetStyle(f.Settings.InactiveStyle)});d.each(f.Groups,function(m,n){f.Groups[m].ActiveSections=0;f.Groups[m].HasZoneTickets=false});var l=f.Settings.Tickets;f.FilteredTickets=[];var g=0;if(!f.Settings.TicketsListContainer&&f.Settings.RowSelector&&(l==null||l.length==0)){if(!f.Settings.SectionSelector){throw ("Section Selector Required")}l=[];var i=/<\S[^><]*>/g;d(f.Settings.RowSelector).each(function(){var v=null;var m=null;var q=d(this).find(f.Settings.SectionSelector).text().replace(i,"");if(q==""&&f.Settings.ZoneSelector){v=d(this).find(f.Settings.ZoneSelector).text().replace(i,"")}else{m=d(this).find(f.Settings.RowNumberSelector).text().replace(i,"")}var o=(f.Settings.PriceSelector?d(this).find(f.Settings.PriceSelector).text().replace(i,""):0);var n=0;if(f.Settings.QuantitySelector){var p=d(this).find(f.Settings.QuantitySelector);if(p.length>0){if(p.length==1){n=d.trim(p.text().replace(i,""))}else{n=[];d.each(p,function(w,x){n.push(parseInt(d.trim(d(x).text().replace(i,""))))})}}}var r=(f.Settings.eTicketSelector?d(this).find(f.Settings.eTicketSelector).length>0:false);var s=d(this);var u="Zone";var t=null;if(v){t=f.GetZone(v)}else{u=f.GetSectionKey(q,m)}d(this).mouseenter(function(){f.HighlightSection(u,true)}).mouseleave(function(){f.ResetSection(u,true)});l.push({SectionKey:u,ZoneKey:t,section:q,row:m,RowObject:s,price:o,quantity:n,eticket:r})})}var k=f.IsFilterSet();d.each(l,function(p,n){if(n.section){if(n.SectionKey==null){n.SectionKey=f.GetSectionKey(n.section,n.row)}}else{if(n.zone){if(n.ZoneKey==null){n.ZoneKey=f.GetZone(n.zone);n.SectionKey="Zone"}}}if(n.SectionKey=="Parking"){f.ParkingFlag=true}if(n.price){if(typeof(n.price)=="number"){n.PriceValue=n.price}else{n.PriceValue=parseFloat(n.price.replace(/[^0-9.-]+/g,""))}}if(f.Settings.Columns.flag){if(n.preferred){f.Settings.Columns.flag.Visible=true;f.PreferredFlag=true}if(n.eticket){f.Settings.Columns.flag.Visible=true;f.eTicketFlag=true}}n.MaxQuantity=0;if(n.quantity){if(typeof(n.quantity)=="object"){d.each(n.quantity,function(r,q){if(parseInt(q)>n.MaxQuantity){n.MaxQuantity=parseInt(q)}})}else{n.MaxQuantity=parseInt(n.quantity)}}if(n.MaxQuantity==0){return}var o=f.IsTicketFiltered(n);if(o&&(!(f.Selection.length>0&&d.inArray(n.SectionKey,f.Selection)==-1)||(n.ZoneKey&&f.Groups[n.ZoneKey].Selected))){var m=f.Sections[n.SectionKey];if(!(f.ZoneSelected&&!n.ZoneKey&&m!=null&&f.Groups[m.GroupId].Selected==false)){f.FilteredTickets.push(n);if(m!=null){n.GroupColor=f.Groups[m.GroupId].Color}}}if(f.Sections[n.SectionKey]){var m=f.Sections[n.SectionKey];n.FormattedSection=m.LongName;n.CleanGroupName=m.CleanGroupName;n.CleanSectionName=m.CleanSectionName;if(o){f.Sections[n.SectionKey].FilteredTickets++}if(f.Sections[n.SectionKey].MinPrice>n.PriceValue){f.Sections[n.SectionKey].MinPrice=n.PriceValue;f.Sections[n.SectionKey].MinPriceValue=n.price}if(f.Sections[n.SectionKey].MaxPrice<n.PriceValue){f.Sections[n.SectionKey].MaxPrice=n.PriceValue;f.Sections[n.SectionKey].MaxPriceValue=n.price}f.Sections[n.SectionKey].Quantity+=n.MaxQuantity;f.Sections[n.SectionKey].Active=true}if(n.ZoneKey){f.Groups[n.ZoneKey].HasZoneTickets=true}});l=null;var h=false;d.each(f.Sections,function(m,n){if(n.Active&&!(k&&n.FilteredTickets==0)){n.SetStyle(f.Settings.NormalStyle);f.Groups[n.GroupId].ActiveSections++;return}if(n.Selected){f.Sections[m].Active=true;f.ToggleSelection(m,true,true);h=true}f.Sections[m].Active=false;n.SetStyle(f.Settings.InactiveStyle)});if(h){f.ProcessTickets();f.SortTickets();f.ShowTickets()}if(f.Settings.GroupsContainer!=null&&f.Groups){f.GenerateGroups()}},SortTickets:function(){if(f.Settings.TicketsListContainer==null){return}var k=f.Settings.TicketsSort.SortType;if(k==null){k="string"}var g=f.Settings.TicketsSort.Column;var j=null;var h=f.Settings.Columns[f.Settings.TicketsSort.Column];if(h!=null){k=h.SortType}if(g=="price"){g="PriceValue"}else{if(g=="quantity"){g="MaxQuantity"}else{if(g=="section"){j="row"}}}var i=f.Settings.TicketsSort.Order.toUpperCase();f.FilteredTickets.sort(function(x,v){var s=null;var p=null;var n=null;var l=null;var r=x.preferred==true;var w=v.preferred==true;if(k=="string"){s=x[g].toString().toUpperCase();p=v[g].toString().toUpperCase();var u=parseFloat(s);var t=parseFloat(p);if(!isNaN(u)&&!isNaN(t)){s=u;p=t}else{if(!isNaN(u)&&isNaN(t)){return(i=="ASC"?-1:1)}else{if(isNaN(u)&&!isNaN(t)){return(i=="ASC"?1:-1)}}}if(j!=null&&x[j]){n=x[j].toString().toUpperCase();l=v[j].toString().toUpperCase();var q=parseFloat(n);var o=parseFloat(l);if(!isNaN(q)&&!isNaN(o)){n=q;l=o}}}else{s=parseFloat(x[g]);p=parseFloat(v[g])}if(f.Settings.PreferredFirst&&r!=w){if(i=="ASC"){return(r?-1:1)}else{return(r?-1:1)}}var m=0;if(i=="ASC"){m=(s<p)?-1:(s>p)?1:0}else{m=(s<p)?1:(s>p)?-1:0}if(m==0&&n!=null&&l!=null){return(n<l)?-1:(n>l)?1:0}return m})},AddSectionMapping:function(g,h){if(f.Sections[g]){if(d.inArray(h,f.Sections[g].Mappings)==-1){f.Sections[g].Mappings.push(h)}}if(f.OtherSections[g]){if(d.inArray(h,f.OtherSections[g].Mappings)==-1){f.OtherSections[g].Mappings.push(h)}}},GetZone:function(h){var g="";d.each(f.Groups,function(k,j){if(j.Name.toLowerCase()==h.toLowerCase()){g=j.Id;return false}d.each(j.Alias,function(i,l){if(j.Alias==h){g=j.Id;return false}})});return g},GetSectionKey:function(h,k){k=parseInt(k);var g="Unmapped";SectionName=h.toLowerCase();SectionName=d.trim(SectionName.replace(/[^0-9a-z]+/g," "));var j="";var m="";var l=[];d.each(f.Groups,function(o,n){d.each(n.Alias,function(p,r){var q=SectionName.indexOf(r);if(q==-1){return}if((q==0||q==SectionName.length-r.length)&&(r.length>=m.length)){m=r;l.push({GroupId:n.Id,Alias:r});if(n.SectionCount==1){g=n.Id;return false}else{j=d.trim(SectionName.replace(m,""));if(f.Sections[j+"_"+n.Id]){g=j+"_"+n.Id;return false}}}});if(g!="Unmapped"){return false}});if(g!="Unmapped"){f.AddSectionMapping(g,h);return g}var i=[];d.each(l,function(n,o){if(o.Alias.length==m.length){i.push(o.GroupId)}});l=i;if(l.length==0){j=SectionName.replace(/[^0-9]+/g,"").toString();m=SectionName.replace(j,"")}d.each(f.Sections,function(p,o){var n=f.Groups[o.GroupId];if(n==null){return}if(o.Name.toLowerCase()==SectionName){if(n.IsExactMatch&&f.SectionCounts[SectionName]>1){return}if(o.RowStart>0&&o.RowEnd>0){if(k<o.RowStart||k>o.RowEnd){return}}g=o.Key;return false}if(o.Name.toLowerCase()==j){if(!(n.IsExactMatch&&d.inArray(n.Id,l)==-1)){g=f.ResolveOtherSection(SectionName);if(g=="Unmapped"){g=o.Key}else{if(f.OtherSections[g]){f.OtherSections[g].Enabled=true}}return false}}if(g=="Unmapped"&&o.ExactMatchAlias!=null&&o.ExactMatchAlias.length>0){d.each(o.ExactMatchAlias,function(q,r){if(r==SectionName){g=o.Key;return false}})}if(g=="Unmapped"&&o.Alias!=null&&o.Alias.length>0){d.each(o.Alias,function(q,r){if(r==SectionName){g=o.Key;return false}else{if(r==j){if(n.IsExactMatch&&d.inArray(n.Id,l)==-1){return}g=f.ResolveOtherSection(SectionName);if(g=="Unmapped"){g=o.Key}else{if(f.OtherSections[g]){f.OtherSections[g].Enabled=true}}return false}}})}});if(g=="Unmapped"){g=f.ResolveOtherSection(SectionName);if(f.OtherSections[g]){f.OtherSections[g].Enabled=true}}f.AddSectionMapping(g,h);return g},ResolveOtherSection:function(h){var g="Unmapped";d.each(f.OtherSections,function(j,i){if(i.IsExactMatch){if(j.toLowerCase()==h){g=j;return false}}else{if(h.indexOf(j.toLowerCase())!=-1){g=j;return false}}if(i.Alias!=null&&i.Alias.length>0){d.each(i.Alias,function(k,l){if(i.IsExactMatch){if(l==h){g=j;return false}}else{if(h.indexOf(l)!=-1){g=j;return false}}})}});return g},IsFilterSet:function(){return(f.Settings.TicketsFilter.MinPrice>0||f.Settings.TicketsFilter.MaxPrice>0||f.Settings.TicketsFilter.eTicket==true||f.Settings.TicketsFilter.Quantity>0||f.Settings.TicketsFilter.Ids!=null)},IsTicketFiltered:function(g){if(f.Settings.TicketsFilter.Ids!=null&&d.inArray(g.id,f.Settings.TicketsFilter.Ids)==-1){return false}if(f.Settings.TicketsFilter.MinPrice>0&&g.PriceValue>0&&g.PriceValue<f.Settings.TicketsFilter.MinPrice){return false}if(f.Settings.TicketsFilter.MaxPrice>0&&g.PriceValue>0&&g.PriceValue>f.Settings.TicketsFilter.MaxPrice){return false}if(f.Settings.TicketsFilter.eTicket&&f.eTicketFlag&&!g.eticket){return false}if(!isNaN(f.Settings.TicketsFilter.Quantity)&&f.Settings.TicketsFilter.Quantity>0){if(f.Settings.TicketsFilter.Comparison=="eq"){if(typeof(g.quantity)=="object"){if(d.inArray(f.Settings.TicketsFilter.Quantity,g.quantity)==-1){return false}}else{if(g.MaxQuantity>0&&g.MaxQuantity!=f.Settings.TicketsFilter.Quantity){return false}}}else{if(f.Settings.TicketsFilter.Comparison=="gt"&&g.MaxQuantity>0&&g.MaxQuantity<f.Settings.TicketsFilter.Quantity){return false}else{if(f.Settings.TicketsFilter.Comparison=="bt"){if(typeof(g.quantity)=="object"){if(d.inArray(f.Settings.TicketsFilter.Quantity,g.quantity)==-1){return false}if(d.inArray(f.Settings.TicketsFilter.MaxQuantity,g.quantity)==-1){return false}}else{if((g.quantity<f.Settings.TicketsFilter.MaxQuantity)||(g.MaxQuantity>0&&g.MaxQuantity>f.Settings.TicketsFilter.MaxQuantity)){return false}}}}}}return true},ShowTickets:function(){if(f.Settings.TicketsListContainer==null){if(f.Settings.RowSelector!=null){d(f.Settings.RowSelector).hide();d.each(f.FilteredTickets,function(i,h){h.RowObject.show()})}return}var g=0;c.Initialize({Container:f.vTableContainer,Rows:f.FilteredTickets.length,TableFormatter:function(h){return h},ColumnsFormatter:function(h){if(!f.Settings.DisplayListHeader){return h.css("display","none")}d.each(f.Settings.Columns,function(i,j){if(j.Visible==null||j.Visible){g++;var k=d("<th>");if(j.Sortable){k.addClass("Sort"+(i==f.Settings.TicketsSort.Column?" "+f.Settings.TicketsSort.Order:""))}if(j.Width){k.css("width",j.Width+"px")}k.attr("lang",i).html("<span>"+j.Title+"</span>");k.click(function(){if(d(this).hasClass("Sort")){var l="";if(d(this).hasClass("ASC")){l="DESC"}else{l="ASC"}f.Settings.TicketsSort={Column:i,Order:l};f.SortTickets();f.ShowTickets()}});h.append(k)}});return h},RowFormatter:function(i,j){var h=f.FilteredTickets[j];i.addClass((j%2==0?"EvenRow":"OddRow"));d.each(f.Settings.Columns,function(k,l){if(l.Visible==null||l.Visible){var m=d("<td>");if(l.CSSClass){m.addClass(l.CSSClass)}if(l.Align){m.css("text-align",l.Align)}if(!h.section&&h.zone){if(k=="section"){m.attr("colspan",2);k="zone"}else{if(k=="row"){return}}}m.html((l.Formatter?l.Formatter(h,k,h[k],(h.FormattedSection!=null?h.FormattedSection:h.section),(h.CleanGroupName!=null?h.CleanGroupName:""),(h.CleanSectionName!=null?h.CleanSectionName:h.section)):h[k]));i.append(m);m.children(".BuyLink").click(function(){var o=d(this).attr("lang");var n=0;i.children("td").each(function(){var p=d(this).children("[lang=Quantity]");if(p.length>0){n=d(p[0]).val();return false}});f.Container.trigger("OnTicketSelected",{Id:o,Quantity:n})});m.children(".Notes").hover(function(p){var n=d.trim(d(this).attr("title"));if(n!=""){var o=d(this).position();f.Tooltip.css({top:o.top+20,left:o.left+20}).html(n);f.Tooltip.show();d(this).attr("title","")}},function(){d(this).attr("title",f.Tooltip.html());f.Tooltip.hide()})}});i.hover(function(){f.HighlightSection(h.SectionKey,true)},function(){f.ResetSection(h.SectionKey,true)});return i},NoResultsFormatter:function(h){return h.append(d("<td>").attr("colspan",g).html(f.Settings.NoResultsFormatter()))}});f.Container.trigger("OnAfterListRender")},ShowTooltip:function(k,j,n){if(f.TooltipZoomed){return}if(f.TooltipTimeout){clearTimeout(f.TooltipTimeout);f.TooltipTimeout=null}if(!n){k=f.GetSectionKey(k)}var m=f.Sections[k];if(!f.Settings.AlwaysShowTooltip&&(!m.Active||m.Quantity==0)){f.HideTooltip();return}var h=f.Settings.TooltipFormatter({Key:m.Key,Section:m.Name,DisplayName:(m.DisplayName!=null?m.DisplayName:m.Name),LongName:m.LongName,Mappings:m.Mappings,DisplayGroupName:m.DisplayGroupName,SectionViewThumbnailUrl:m.SectionViewThumbnailUrl,SectionViewUrl:m.SectionViewUrl,Group:f.Groups[m.GroupId],Active:m.Active,Quantity:m.Quantity,MinPrice:m.MinPriceValue,MaxPrice:m.MaxPriceValue,RowDetails:m.RowDetails});f.Tooltip.html(h);if(f.Settings.EnableTooltipSectionView){var l=function(){f.Tooltip.unbind().hide().css("position","absolute");f.TooltipTimeout=null;f.TooltipZoomed=false;d(".SectionViewBG").remove()};var g=function(p){f.TooltipZoomed=true;d("<div>").attr("class","SectionViewBG").css("width","100%").css("height","100%").css("position","fixed").css("left",0).css("top",0).css("z-index",999).appendTo(d("body")).click(function(){l()});var o=f.Tooltip.position();f.Tooltip.css("position","fixed").css("opacity",0).css("left",(d(window).outerWidth(true)-f.SectionViewSize)/2).css("top",(d(window).outerHeight(true)-(f.SectionViewSize/2))/2).animate({opacity:1},"slow");p.parent().css("width",f.SectionViewSize);p.css("height",Math.round(f.SectionViewSize/2));p.attr("src",m.SectionViewUrl);d(".SectionViewZoom",f.Tooltip).remove();p.unbind();p.css("cursor","auto")};var i=(a.browser=="Firefox"?"-moz-zoom-in":(a.browser=="Chrome"||a.browser=="Safari"?"-webkit-zoom-in":"pointer"));d("img",f.Tooltip).css("cursor",i).click(function(o){o.preventDefault();g(d(this))});d(".SectionViewZoom",f.Tooltip).css("cursor",i).click(function(o){o.preventDefault();g(d("img",f.Tooltip))});d(".SectionViewClose",f.Tooltip).click(function(o){l()});f.Tooltip.mouseover(function(){e.MouseOnTooltip=true}).mouseout(function(){e.MouseOnTooltip=false})}f.MoveTooltip(m,j);h=d.trim(h);if(h==""){return}f.Tooltip.show()},MoveTooltip:function(k,i){var g="BottomRight";var j=k.GetCorner(i,g);var h=f.Container.position();j.x+=h.left;j.y+=h.top;if(j.x+f.Tooltip.width()>h.left+f.Container.outerWidth(true)||j.x+f.Tooltip.width()>d(window).width()){g="BottomLeft";j=k.GetCorner(i,g);j.y+=h.top;j.x=h.left+j.x-f.Tooltip.width()-10}if(j.y+f.Tooltip.height()>h.top+f.Container.outerHeight(true)||j.y+f.Tooltip.height()>d(window).height()){if(g=="BottomLeft"){g="TopLeft"}else{g="TopRight"}j=k.GetCorner(i,g);if(g=="TopRight"){j.x+=h.left}else{j.x=h.left+j.x-f.Tooltip.width()-10}j.y=h.top+j.y-f.Tooltip.height()-10}if(f.Settings.AnimateTooltip){f.Tooltip.stop();f.Tooltip.animate({top:j.y,left:j.x})}else{f.Tooltip.css("top",j.y).css("left",j.x)}},HideTooltip:function(h){if(f.TooltipTimeout){return}var g=function(){if(e.MouseOnTooltip){return}d(".SectionViewBG").remove();f.Tooltip.unbind().hide().css("position","absolute");if(!h){f.HideSectionView("mouseover")}f.TooltipZoomed=false};f.TooltipTimeout=setTimeout(g,800)},ShowSectionView:function(k,g){if(f.Settings.SectionViewContainer&&f.Settings.SectionViewTrigger==g){var j=f.Sections[k];if(!j.SectionViewUrl){f.HideSectionView(g);return}var i="Approximate View from "+j.LongName;var h=d("<div>");if(g=="click"){h.addClass("tuMapSectionViewContainer");var i=d("<div>").html(i).append(d("<div>").addClass("CloseButton").click(function(){f.HideSectionView(g)}));h.append(i)}h.append('<img src="'+j.SectionViewUrl+'" alt="'+i+'" style="max-width:100%;"/>');d(f.Settings.SectionViewContainer).html(h);d(f.Settings.SectionViewContainer).show()}},HideSectionView:function(g){if(f.Settings.SectionViewContainer&&f.Settings.SectionViewTrigger==g){d(f.Settings.SectionViewContainer).html("");d(f.Settings.SectionViewContainer).hide()}},InitSection:function(i,h){if(f.Groups[i.GroupId].SectionCount==1){i.Key=i.GroupId}else{i.Key=i.Name.toLowerCase()+"_"+i.GroupId}var g=f.Groups[i.GroupId];i.LongName=(i.DisplayGroupName?(g.DisplayName!=null?g.DisplayName:g.Name)+" ":"")+(i.DisplayName!=null?i.DisplayName:i.Name);i.CleanGroupName=(i.DisplayGroupName?(g.DisplayName!=null?g.DisplayName:g.Name):"");i.CleanSectionName=(i.DisplayName!=null?i.DisplayName:i.Name);if(!f.SectionCounts[i.Name.toLowerCase()]){f.SectionCounts[i.Name.toLowerCase()]=0}f.SectionCounts[i.Name.toLowerCase()]++;if(i.IsSectionViewAvailable){i.IsSectionViewAvailable=h!=null}i.Active=(f.Settings.TicketsListContainer==null&&f.Settings.RowSelector==null);if(i.IsSectionViewAvailable){i.SectionViewThumbnailUrl=h+f.Settings.TooltipSectionViewSize+"X/"+i.Key+".jpg";i.SectionViewUrl=h+f.SectionViewSize+"X/"+i.Key+".jpg"}e.Add(new b.Map.Section(i))},Refresh:function(g){if(g!=null){f.RefreshType=g}switch(f.RefreshType){case"Reset":if(!f.Settings.TicketsListContainer&&f.Settings.RowSelector){f.Settings.Tickets=null}else{if(f.Settings.Tickets){d.each(f.Settings.Tickets,function(h,i){i.SectionKey=null})}else{f.Settings.Tickets=[]}}d.extend(f.Settings,f.GetStyles(f.Settings.ColorScheme));d(this).tuMap(f.Settings);break;case"ProcessTickets":f.ProcessTickets();f.SortTickets();f.ShowTickets();break;case"SortTickets":f.SortTickets();f.ShowTickets();break;case"ShowTickets":f.ShowTickets();break}return this},GenerateGroups:function(){var k="";d.each(f.Groups,function(p,o){k+='<div lang="'+o.Id+'" class="tuMapGroup '+(o.ActiveSections>0||o.HasZoneTickets?"":"Disabled")+" "+(o.Selected?"tuMapGroupChecked":"")+'">';k+='<span class="tuMapGroupColor" style="background-color:'+o.Color+';"></span>';k+='<span class="tuMapGroupTitle">'+o.Name+"</span>";k+='<br style="clear:both"/>';k+="</div>"});d(f.Settings.GroupsContainer).html(k).addClass("tuMapGroupsContainer");var n=0;d(f.Settings.GroupsContainer).children(".tuMapGroup").each(function(){if(d(this).outerWidth(true)>n){n=Math.round(d(this).outerWidth(true))}});if(!f.InteractiveMode){d(f.Settings.GroupsContainer).removeClass("tuMapActiveGroupsContainer")}else{d(f.Settings.GroupsContainer).addClass("tuMapActiveGroupsContainer");d(f.Settings.GroupsContainer).children("div").mouseenter(function(){if(d(this).hasClass("Disabled")){var o=d(this).offset();f.Tooltip.html("No Inventory Available").css({top:o.top-f.Tooltip.height(),left:o.left-f.Tooltip.width()});f.Tooltip.show()}else{f.HighlightGroup(d(this).attr("lang"))}}).mouseleave(function(){if(d(this).hasClass("Disabled")){f.Tooltip.hide()}else{f.ResetGroup(d(this).attr("lang"))}}).click(function(){if(d(this).hasClass("Disabled")){return}var o=d(this).attr("lang");var r=f.Groups[o].Selected;if(r){f.Groups[o].Selected=false;f.ZoneSelected=false}else{f.Groups[o].Selected=true;f.ZoneSelected=true}var q=[];f.GetSectionsInGroup(o,{OnlyActive:true,OnlyUnselected:false},function(s,t){q.push({Name:t.Name,Active:t.Active});f.Sections[s].Selected=r;f.ToggleSelection(s,true,true)});f.ProcessTickets();f.SortTickets();f.ShowTickets();var p=f.Groups[o];f.Container.trigger("OnGroupClick",{Name:p.Name,Selected:p.Selected,Sections:q})})}var g=d(f.Settings.GroupsContainer).outerWidth(true);var m=d(f.Settings.GroupsContainer+" > DIV").length;var i=parseInt(g/n);var l=parseInt(m/i)+(m%i>0?1:0);while(true){var h=parseInt(m/(i-1))+(m%(i-1)>0?1:0);if(h<=l){i--}else{break}}n=Math.floor(g/i);var j=0;d(f.Settings.GroupsContainer+" .tuMapGroup").each(function(){if(j==0){d(f.Settings.GroupsContainer).append(d("<div>").addClass("TempContainer").css("width",n))}d(f.Settings.GroupsContainer+" > .TempContainer:last").append(d(this));j++;if(j==l){j=0}});d(f.Settings.GroupsContainer+" > .TempContainer").removeClass("TempContainer");d(f.Settings.GroupsContainer).append('<br style="clear:both;"/>')},OnLoad:function(h,j){try{if(j.Status==1){e.GetTile=function(r,p,o){if(j.MapType=="Interactive"||j.MapType=="Static"){var q="";if(f.Settings.ColorScheme==1){q="WB/"}var n=o.createElement("IMG");n.src=j.MapBaseUrl+j.VenueChartId+"/"+q+p+"_"+r.x+"_"+r.y+".jpg";n.onerror=function(){if(f.Settings.ColorScheme!=0){this.src=j.MapBaseUrl+j.VenueChartId+"/"+p+"_"+r.x+"_"+r.y+".jpg"}};return n}else{var n=o.createElement("IMG");n.src=j.MapBaseUrl+j.MapType+"/"+p+"_"+r.x+"_"+r.y+".jpg";return n}};e.Resolutions=j.Resolutions;e.AdaptiveDisplay=j.AdaptiveDisplay;e.ZoomLevel=f.ConvertZoom();e.Initialize(d(this));if(j.Groups&&j.Groups.length>0){d.each(j.Groups,function(o,n){n.ActiveSections=0;f.Groups[n.Id]=n})}if(j.Sections!=null){var i=(j.SectionViewBaseUrl?j.SectionViewBaseUrl+j.VenueChartId+"/":null);f.SectionViewSize=500;if(f.Settings.SectionViewContainer){f.SectionViewSize=f.CalculateSVWidth(d(f.Settings.SectionViewContainer).width())}else{f.Settings.TooltipSectionViewSize=f.CalculateSVWidth(f.Settings.TooltipSectionViewSize);f.SectionViewSize=f.CalculateSVWidth(f.Settings.TooltipSectionViewSize*2)}f.SectionCounts={};f.Sections={};d.each(j.Sections,function(o,n){f.InitSection(n,i)});var m=function(){e.Zoom=f.Settings.ZoomLevel;e.CheckMaxZoom();e.SetZoom(f.ConvertZoom())};var k=1;if(e.IsOldIE()){k=1000}setTimeout(m,k)}f.OtherSections={};if(j.OtherSections!=null){d.each(j.OtherSections,function(o,n){f.OtherSections[n.Name]=n;f.OtherSections[n.Name].Enabled=false;f.OtherSections[n.Name].Mappings=[]})}f.OtherSections.Unmapped={Name:"Unmapped",Alias:[],IsExactMatch:false,Enabled:false,Mappings:[]};f.OnLoadContinue(j)}else{if(f.Settings.FailoverMapUrl){var g=d("<img>").attr("src",f.Settings.FailoverMapUrl).attr("alt","Venue Map").css("max-width",f.Container.outerWidth(true)).load(function(){f.OnLoadContinue(j)});d("<div>").css("text-align","center").append(g).appendTo(f.Container)}}}catch(l){f.Container.trigger("OnError",{Code:-1,Message:l.message});f.MapError=true;throw l}},OnLoadContinue:function(g){f.InteractiveMode=g.MapType=="Interactive";if(!f.InteractiveMode&&g.OtherSection==null){f.OtherSections.Parking={Name:"Parking",Alias:["parking","park"],IsExactMatch:false,Enabled:true,Mappings:[]}}f.ProcessTickets();f.SortTickets();if(f.InteractiveMode){d.each(f.OtherSections,function(h,i){if(i.Enabled){e.AddMapControl(i.Name,function(j){f.FilterTickets(h,j,true);f.Container.trigger("OnControlClick",{Name:i.Name,Selected:j,Mappings:i.Mappings})},true)}})}f.GenerateFilters();f.ShowTickets();if(g.Status==1){f.Container.trigger("OnInit",{MapType:g.MapType,ResolvedBy:g.ResolvedBy})}else{f.Container.trigger("OnError",{Code:g.ErrorCode,Message:g.Error});f.MapError=true}},CalculateSVWidth:function(i){var h=[250,500,1000,1500];if(i<=h[0]){return h[0]}else{for(var g=0;g<4;g++){if(g==h.length-1){return h[h.length-1]}else{if(i>=h[g]&&i<h[g+1]){return(i-h[g]<h[g+1]-i?h[g]:h[g+1])}}}}},GenerateFilters:function(){if(f.Settings.TicketsListContainer){f.Container.trigger("OnBeforeListRender");d(f.Settings.TicketsListContainer).css("overflow","visible");d(f.Settings.TicketsListContainer).html("");var h=d(f.Settings.TicketsListContainer).outerHeight(true);var k=0;if(f.PreferredFlag||f.eTicketFlag){var i=d("<div>").addClass("tuMapPreferredFilter");if(f.PreferredFlag){var l=d("<div>").addClass("tuMapPreferred");l.append(d("<span>").addClass("Icon"));var g=d("<input>").attr("type","checkbox").attr("checked",(f.Settings.PreferredFirst?'checked="checked"':""));g.change(function(m){f.Settings.PreferredFirst=d(this).is(":checked");f.SortTickets();f.ShowTickets()});l.append(g);l.append(d("<span>").html(f.Settings.PreferredText));i.append(l)}if(f.eTicketFlag){var j=d("<div>").addClass("tuMapeTicket");j.append(d("<span>").addClass("Icon"));j.append(d("<span>").html("E-Ticket"));i.append(j)}d(f.Settings.TicketsListContainer).append(i);d("<br>").css("clear","both").appendTo(i);if(h>0){k=i.outerHeight(true)}}f.vTableContainer=d("<div>");d(f.Settings.TicketsListContainer).append(f.vTableContainer);if(h==0){h=f.Container.outerHeight(true);if(f.Settings.GroupsContainer){h+=d(f.Settings.GroupsContainer).outerHeight(true)}h=h-Math.abs(f.Container.offset().top-d(f.vTableContainer).offset().top)}h=h-k;f.vTableContainer.height(h)}},Extend:function(g){d.extend(true,f,g);return this},GetStyles:function(g){if(g==0){return{HighlightStyle:{strokeColor:"#FFFFFF",strokeWeight:2,fillColor:"#0000FF",fillOpacity:0.2},NormalStyle:{fillOpacity:0,fillColor:"#FFFFFF",strokeColor:"#FFFFFF",strokeWeight:0},SelectedStyle:{strokeWeight:2,fillColor:"#FFFFFF",fillOpacity:0.3},InactiveStyle:{strokeColor:"#FFFFFF",strokeWeight:0,fillColor:"#666666",fillOpacity:0.7}}}else{return{HighlightStyle:{strokeColor:"#333333",strokeWeight:2,fillColor:"#FFFF00",fillOpacity:0.5},NormalStyle:{fillOpacity:0,fillColor:"#FFFFFF",strokeColor:"#FFFFFF",strokeWeight:0},SelectedStyle:{strokeWeight:2,fillColor:"#FFFFFF",fillOpacity:0.3},InactiveStyle:{strokeColor:"#FFFFFF",strokeWeight:0,fillColor:"#666666",fillOpacity:0.7}}}},Initialize:function(h){f.Groups={};f.Sections={};f.OtherSections={};f.Selection=[];f.RefreshType="None";if(h.ColorScheme!=null){d.extend(f.defaults,f.GetStyles(h.ColorScheme))}f.Settings=d.extend({},f.defaults,h);f.Container=d(this);f.Container.unbind();d(".tuMapTooltip").remove();var g=f.Container.position();f.Tooltip=d('<div class="tuMapTooltip"></div>').insertAfter(f.Container).css({position:"absolute",display:"none","z-index":20000,left:g.left,top:g.top});f.Container.bind("OnTicketSelected",f.Settings.OnTicketSelected);f.Container.bind("OnMouseover",f.Settings.OnMouseover);f.Container.bind("OnMouseout",f.Settings.OnMouseout);f.Container.bind("OnClick",f.Settings.OnClick);f.Container.bind("OnGroupClick",f.Settings.OnGroupClick);f.Container.bind("OnLoad",f.OnLoad);f.Container.bind("OnInit",f.Settings.OnInit);f.Container.bind("OnBeforeListRender",f.Settings.OnBeforeListRender);f.Container.bind("OnAfterListRender",f.Settings.OnAfterListRender);f.Container.bind("OnError",f.Settings.OnError);f.Container.bind("OnReset",f.Settings.OnReset);f.Container.bind("OnControlClick",f.Settings.OnControlClick);var i="Version=3.1.12&MapSet="+f.Settings.MapSet+"&MapType="+f.Settings.MapType+"&EnableGroups="+(f.Settings.GroupsContainer!=null).toString()+"&Domain="+window.location.host+"&AutoSwitchToStatic="+f.Settings.AutoSwitchToStatic;if(f.Settings.MapId==null&&f.Settings.EventId==null&&f.Settings.EventInfo==null){throw ("EventInfo, MapId or EventId is Required")}else{if(f.Settings.EventId!=null){i="EventId="+f.Settings.EventId+"&SeatingChartAutoCorrect="+f.Settings.SeatingChartAutoCorrect+"&"+i}if(f.Settings.MapId!=null){i="MapId="+f.Settings.MapId+"&"+i}if(f.Settings.EventInfo!=null){i="Venue="+escape(f.Settings.EventInfo.Venue)+"&Event="+escape(f.Settings.EventInfo.EventName)+"&EventDate="+f.Settings.EventInfo.EventDate+"&"+i}}d.ajax({url:f.Settings.ServiceUrl,dataType:"jsonp",crossDomain:true,data:i,type:"POST",success:function(j){if(f.Settings.GroupsContainer!=null){d(f.Settings.GroupsContainer).html("")}if(f.Settings.TicketsListContainer!=null){d(f.Settings.TicketsListContainer).html("")}f.Container.html("");f.Container.trigger("OnLoad",j)},error:function(l,j,k){}});return this}};var c={defaults:{Rows:0,TableFormatter:function(g){return g},ColumnsFormatter:function(g){return g.append(d("<th>").text("Column"))},RowFormatter:function(h,g){return h.attr("lang",g).append(d("<td>").text("Row"+g))},NoResultsFormatter:function(g){}},Initialize:function(i){c.Body=null;c.Fillers=[];c.RowData=[];c.RowHeight=0;c.Settings=d.extend({},c.defaults,i);c.Settings.Container.unbind();c.Settings.Container.html("").attr("class","tuMapTicketList");c.ColTable=c.Settings.TableFormatter(d("<table>").attr("cellpadding",3).attr("cellspacing",0).attr("style","width:100%;"));c.ColTable.append(d("<thead>").append(c.Settings.ColumnsFormatter(d("<tr>"))));c.ColTable.appendTo(c.Settings.Container);c.TableContainer=d("<div>").css("overflow","auto").css("height",c.Settings.Container.height()-c.ColTable.height()-1);c.TableContainer.appendTo(c.Settings.Container);c.Table=c.ColTable.clone();c.ColTable.css("table-layout","fixed");c.Body=c.Table.append("<tbody>");c.Table.appendTo(c.TableContainer);if(c.Settings.Rows==0){c.Body.append(c.Settings.NoResultsFormatter(d("<tr>")));c.AdjustColumns();return}for(var g=0;g<c.Settings.Rows;g++){c.RowData[g]={Created:true,tr:d("<tr>")};c.Body.append(c.Settings.RowFormatter(c.RowData[g].tr,g));if(c.Table.height()>c.TableContainer.height()){c.RowHeight=d(c.Table.find("tr")[1]).height();var h=d("<tr>").attr("height",c.Settings.Rows*c.RowHeight);c.Body.append(h);c.Fillers.push({startIndex:g+1,endIndex:c.Settings.Rows-1,tr:h});c.CreateRow(0,g);break}}c.AdjustColumns();c.TableContainer.scroll(function(){var j=d(this).scrollTop();if(c.scrollTop!=j){if(c.verticalScrollHandle!=null){clearTimeout(c.verticalScrollHandle)}c.verticalScrollHandle=setTimeout(function(){c.RenderRows()},10);c.scrollTop=j}})},CreateRow:function(u,p){var w=c.RowData;for(var o=u;o<=p;o++){if(w[o]==null){w[o]={}}}var h=false;for(var o=u;o<=p;o++){if(w[o].tr==null){h=true;break}}if(!h){return}var v=c.Body;var g=c.RowHeight;var j=c.Fillers;var k=[];for(var o=j.length;o--;){var n=j[o];if(u<=n.endIndex&&p>=n.startIndex){k.push(n)}}for(var o=k.length;o--;){var n=k[o];var q=u>=n.startIndex?u:n.startIndex;var t=p<=n.endIndex?p:n.endIndex;for(var r=q;r<=t;r++){var s=w[r];s.tr=d("<tr>").height(g+"px").insertBefore(n.tr)}var m=false;var l=n.startIndex;if(t<n.endIndex){n.startIndex=t+1;n.tr.height(((n.endIndex-n.startIndex+1)*g)+"px");m=true}if(q>l){if(m){var n={startIndex:l,endIndex:q-1,tr:d("<tr>")};n.tr.height(((n.endIndex-n.startIndex+1)*g)+"px").insertBefore(w[q].tr);j.push(n)}else{n.endIndex=q-1;n.tr.height(((n.endIndex-n.startIndex+1)*g)+"px").insertBefore(w[q].tr);m=true}}if(!m){for(var r=j.length;r--;){if(n==j[r]){j.splice(r,0);break}}n.tr.remove()}}},RenderRows:function(){if(c.Settings.Rows==0){return}var h=Math.floor(c.TableContainer.scrollTop()/c.RowHeight)-5;var k=Math.ceil((c.TableContainer.scrollTop()+c.TableContainer.outerHeight(true))/c.RowHeight)+5;if(h<0){h=0}if(k>c.Settings.Rows-1){k=c.Settings.Rows-1}c.CreateRow(h,k);for(var g=h;g<=k;g++){var j=c.RowData[g];if(j.Created!==true){c.Settings.RowFormatter(j.tr,g);j.Created=true}}c.AdjustColumns()},AdjustColumns:function(){var i=c.Table.find("tr:first").children();var h=c.ColTable.find("tr:first").children();for(var g=0;g<i.length-1;g++){d(h[g]).width(d(i[g]).width())}c.Table.css("margin-top",-d(i[0]).outerHeight(true)-1)}};var e={TileSize:100,BaseTileSize:100,OnMouseOver:function(g,h,i){if(!i){return}if(i.Active&&!i.Selected){i.SetStyle(f.Settings.HighlightStyle)}if(h){f.ShowTooltip(i.Key,h,true)}f.Container.trigger("OnMouseover",{Active:i.Active,Selected:i.Selected,Key:i.Key,Name:i.Name,DisplayName:i.DisplayName,DisplayGroupName:i.DisplayGroupName,ExactMatchAlias:i.ExactMatchAlias,Alias:i.Alias,Group:f.Groups[i.GroupId],SectionViewAvailable:i.IsSectionViewAvailable,SectionViewThumbnailUrl:i.SectionViewThumbnailUrl,SectionViewUrl:i.SectionViewUrl,Mappings:i.Mappings,MousePosition:h,RowDetails:i.RowDetails,RowStart:i.RowStart,RowEnd:i.RowEnd})},OnMouseOut:function(g,h,i){if(!i){return}if(i.Active&&!i.Selected){i.SetStyle(f.Settings.NormalStyle)}if(h){f.HideTooltip()}f.Container.trigger("OnMouseout",{Active:i.Active,Selected:i.Selected,Key:i.Key,Name:i.Name,DisplayName:i.DisplayName,DisplayGroupName:i.DisplayGroupName,ExactMatchAlias:i.ExactMatchAlias,Alias:i.Alias,Group:f.Groups[i.GroupId],SectionViewAvailable:i.IsSectionViewAvailable,SectionViewThumbnailUrl:i.SectionViewThumbnailUrl,SectionViewUrl:i.SectionViewUrl,Mappings:i.Mappings,MousePosition:h,RowDetails:i.RowDetails,RowStart:i.RowStart,RowEnd:i.RowEnd})},OnMouseMove:function(g,h,i){},OnClick:function(g,h,i){f.HideTooltip(true);if(i&&i.Active){f.ToggleSelection(i.Key,true);f.Container.trigger("OnClick",{Active:i.Active,Selected:i.Selected,Key:i.Key,Name:i.Name,DisplayName:i.DisplayName,DisplayGroupName:i.DisplayGroupName,ExactMatchAlias:i.ExactMatchAlias,Alias:i.Alias,Group:f.Groups[i.GroupId],SectionViewAvailable:i.IsSectionViewAvailable,SectionViewThumbnailUrl:i.SectionViewThumbnailUrl,SectionViewUrl:i.SectionViewUrl,Mappings:i.Mappings,RowDetails:i.RowDetails,RowStart:i.RowStart,RowEnd:i.RowEnd})}},OnReset:function(){d.each(f.Selection,function(h,g){if(f.Sections[g]){f.Sections[g].Selected=false}});f.Selection=[];f.ZoneSelected=false;d.each(f.Groups,function(g,h){f.Groups[g].Selected=false});if(f.BlinkTimer!=null){clearInterval(f.BlinkTimer);f.BlinkTimer=null}d(".tuMapControlSelected").each(function(){d(this).removeClass("tuMapControlSelected")});d(".tuMapControlBlink").each(function(){d(this).removeClass("tuMapControlBlink")});e.SetCenter(new b.Map.Point(0,0));e.Zoom=f.Settings.ZoomLevel;e.CheckMaxZoom();e.SetZoom(f.ConvertZoom());f.ProcessTickets();f.SortTickets();f.ShowTickets();f.Container.trigger("OnReset")},GetTile:function(){},Container:null,Wrapper:null,Canvas:null,GCanvas:null,CanvasContext:null,GCanvasContext:null,GhostSections:{},CurrentShape:null,TranslatePos:null,StartDragOffset:{},BaseUrl:"http://data.ticketutils.com/Charts/",ZoomLevel:5,Side:500,Tiles:[],IsOldIE:function(){var g=navigator.userAgent.toLowerCase();return(g.indexOf("msie")!=-1)?parseInt(g.split("msie")[1])<=8:false},CheckMaxZoom:function(){if(f.Settings.MaxZoom>0&&e.Zoom>f.Settings.MaxZoom){e.Zoom=f.Settings.MaxZoom}},DetectZoomLevel:function(h){for(var g=0;g<e.Resolutions.length;g++){if(e.Resolutions[g]>h){if(g>0){e.Zoom=(h>=e.Resolutions[g-1]+(e.Resolutions[g]-e.Resolutions[g-1])*f.Settings.AdaptiveThreshold?g+1:g)}else{e.Zoom=1}break}}e.CheckMaxZoom();e.ZoomLevel=e.Resolutions[e.Zoom-1]/100;f.Settings.ZoomLevel=e.Zoom},Initialize:function(i){var n=i.outerHeight(true);var h=i.outerWidth(true);if(h==0||n==0){if(h>0){n=h}else{if(n>0){h=n}else{var m=i.clone().css("postion","absolute").css("display","block").css("left","-1000").css("top","-1000");d("body").append(m);h=m.outerWidth(true);n=m.outerHeight(true);m.remove();if(h==0||n==0){n=e.Side*e.ZoomLevel;h=n}}}}if(e.AdaptiveDisplay){e.DetectZoomLevel(h)}else{e.Zoom=f.Settings.ZoomLevel;e.CheckMaxZoom()}e.Container=d("<div>").attr("class","tuMapContainer").attr("style","position:relative;margin:auto;overflow:hidden;width:"+h+"px;height:"+n+"px").appendTo(i).disableSelection().mousemove(function(o){if(e.MouseDown){if(e.CurrentShape){e.Wrapper.trigger("OnMouseOut",[e.GetAbsolutePosition(o),e.CurrentShape])}d(e.Canvas).css("cursor","move");e.CurrentShape=null;e.TranslatePos.x=o.clientX-e.StartDragOffset.x;e.TranslatePos.y=o.clientY-e.StartDragOffset.y;e.Translate();return}});e.TranslatePos=new b.Map.Point(0,0);e.Side=e.BaseTileSize*e.ZoomLevel;e.Wrapper=d("<div>").attr("style","z-index:0;position:absolute;width:"+e.Side+"px;height:"+e.Side+"px").disableSelection().appendTo(e.Container).mousedown(function(o){e.MouseDown=true;e.StartDragOffset.x=o.clientX-e.TranslatePos.x;e.StartDragOffset.y=o.clientY-e.TranslatePos.y}).mouseup(function(o){e.MouseDown=false;e.Dragging=false;d(e.Canvas).css("cursor","auto")}).mouseover(function(o){e.MouseDown=false;e.Dragging=false}).mouseout(function(o){e.MouseDown=false;e.Dragging=false;return false});e.GenerateTiles();var g=d("<canvas />").attr("style","position:absolute; top:0; left:0; z-index:1").disableSelection().appendTo(e.Wrapper);e.Canvas=g[0];e.Canvas.width=e.Wrapper.width();e.Canvas.height=e.Wrapper.height();e.Canvas.onselectstart=function(){return false};if(window.G_vmlCanvasManager){G_vmlCanvasManager.initElement(e.Canvas)}e.CanvasContext=e.Canvas.getContext("2d");if(!e.IsOldIE()){var j=d("<canvas />");e.GCanvas=j[0];e.GCanvas.width=e.Wrapper.width();e.GCanvas.height=e.Wrapper.height();if(window.G_vmlCanvasManager){G_vmlCanvasManager.initElement(e.GCanvas)}e.GCanvasContext=e.GCanvas.getContext("2d")}e.ZoomControls=d("<div>").addClass("ZoomControls").appendTo(e.Container);d("<div>").addClass("ZoomIn").appendTo(e.ZoomControls).click(function(){e.ZoomIn()});d("<div>").addClass("ZoomOut").appendTo(e.ZoomControls).click(function(){e.ZoomOut()});e.ResetContainer=d("<div>").attr("style","position:absolute;right:5px;top:5px;").appendTo(e.Container);e.ResetButton=d("<div>").addClass("tuMapControl").html(f.Settings.ResetButtonText).appendTo(e.ResetContainer).click(function(){f.Reset()});d(".tuMapControlsContainer").remove();if(f.Settings.ControlsPosition=="Inside"){e.ControlsContainer=d('<div class="tuMapControlsContainer">').attr("style","text-align:center;bottom:0;left:50%;position:absolute;").appendTo(e.Container)}else{e.ControlsContainer=d('<div class="tuMapControlsContainer">').attr("style","text-align:center;margin:0 auto;").insertAfter(i)}if(e.IsOldIE()){e.CallbackFunctionId="TMCB"+Math.floor(Math.random()*1000000)+1000;window[e.CallbackFunctionId]=function(t,s,p,o){var r=e.Wrapper.offset();var q={x:t.x,y:t.y};if(p=="out"){e.TriggerEvent(q,null)}else{if(p=="click"){e.Wrapper.trigger("OnClick",[q,(e.CurrentShape!=null?e.CurrentShape:f.Sections[o])])}else{e.TriggerEvent(q,o)}}}}var l=function(r){if(!e.Dragging){var q=e.GetAbsolutePosition(r);var p=e.GetSectionUnderMouse(r);if(p){var o=f.Sections[p];if(o){e.Wrapper.trigger("OnClick",[q,o])}}}};g.bind("mouseup",function(o){l(o)}).bind("mousemove",function(o){if(e.IsOldIE()){return}e.TriggerEvent(e.GetAbsolutePosition(o),e.GetSectionUnderMouse(o))}).bind("contextmenu",function(o){o.preventDefault()});if(jQuery().hammer){var k=g.hammer({prevent_default:true,drag_block_horizontal:true,drag_block_vertical:true,drag_min_distance:20,tap:true,tap_always:true,show_touches:true,prevent_mouseevents:true});k.on("tap",function(o){l(o.gesture.center)}).on("pinch",function(o){var p=Math.ceil(e.Zoom*o.gesture.scale);if(p<1){p=1}else{if(p>e.Resolutions.length){p=e.Resolutions.length}}if(p!=e.Zoom){e.Zoom=p;e.SetZoom(e.Resolutions[e.Zoom-1]/100)}}).on("drag",function(o){e.TranslatePos.x=o.gesture.center.pageX-e.StartDragOffset.x;e.TranslatePos.y=o.gesture.center.pageY-e.StartDragOffset.y;e.Translate()}).on("dragstart",function(o){e.Dragging=true;e.StartDragOffset.x=o.gesture.center.pageX-e.TranslatePos.x;e.StartDragOffset.y=o.gesture.center.pageY-e.TranslatePos.y}).on("dragend",function(){e.Dragging=false})}e.Wrapper.bind("OnMouseOver",e.OnMouseOver);e.Wrapper.bind("OnMouseOut",e.OnMouseOut);e.Wrapper.bind("OnClick",e.OnClick);e.Wrapper.bind("OnMouseMove",e.OnMouseMove);e.Wrapper.bind("OnReset",e.OnReset);e.SetCenter(new b.Map.Point(0,0));return this},AddMapControl:function(i,g,h){d("<div>").addClass("tuMapControl").html(i).appendTo(e.ControlsContainer).click(function(){var j=true;if(h){if(d(this).hasClass("tuMapControlSelected")||d(this).hasClass("tuMapControlBlink")){d(this).removeClass("tuMapControlSelected");d(this).removeClass("tuMapControlBlink");j=false}else{d(this).addClass("tuMapControlSelected")}}g(j)});if(f.Settings.ControlsPosition=="Inside"){e.ControlsContainer.css("margin-left",0-parseInt(e.ControlsContainer.width()/2))}else{e.ControlsContainer.css("padding","3px")}},GetAbsolutePosition:function(g){var h=e.Container.offset();return new b.Map.Point(g.pageX-h.left,g.pageY-h.top)},GetSectionUnderMouse:function(j){if(!e.IsOldIE()){var i=e.Wrapper.offset();var h=new b.Map.Point(j.pageX-i.left,j.pageY-i.top);var k=e.GCanvasContext.getImageData(h.x,h.y,1,1).data;var g="#"+("000000"+e.RGBToHex(k[0],k[1],k[2])).slice(-6);return e.GhostSections[g]}},GenerateTiles:function(){for(var h=0;h<this.Tiles.length;h++){this.Tiles[h].remove()}var g=1;var j=(e.BaseTileSize*e.ZoomLevel);if(e.ZoomLevel<=5){g=1;e.TileSize=j}else{if(e.ZoomLevel<=12){g=2;e.TileSize=j/2}else{g=j/500;e.TileSize=500}}for(var h=0;h<g;h++){for(var k=0;k<g;k++){var i=e.GetTile(new b.Map.Point(h,k),e.ZoomLevel,document);d(i).attr("style","position:absolute;top:"+(k*e.TileSize)+"px;left:"+(h*e.TileSize)+"px;z-index:0;width:"+e.TileSize+"px;height:"+e.TileSize+"px;").appendTo(e.Wrapper).disableSelection();this.Tiles.push(d(i))}}},Trigger:function(g,h){e.Wrapper.trigger(g,[null,h])},TriggerEvent:function(g,h){if(h){if(e.CurrentShape==null){d(e.Canvas).css("cursor","pointer");e.Wrapper.trigger("OnMouseOver",[g,f.Sections[h]])}else{if(e.CurrentShape.Key==h){e.Wrapper.trigger("OnMouseMove",[g,f.Sections[h]])}else{e.Wrapper.trigger("OnMouseOut",[g,e.CurrentShape]);e.Wrapper.trigger("OnMouseOver",[g,f.Sections[h]])}}e.CurrentShape=f.Sections[h]}else{if(e.CurrentShape!=null){e.Wrapper.trigger("OnMouseOut",[g,e.CurrentShape]);d(e.Canvas).css("cursor","move");e.CurrentShape=null}}},Add:function(g){f.Sections[g.Key]=g;while(true){g.SetGhostColor();if(!e.GhostSections[g.GhostColor]){e.GhostSections[g.GhostColor]=g.Key;break}}},SetZoom:function(h){var g=e.ZoomLevel;e.ZoomLevel=h;if(e.ZoomLevel>20){e.ZoomLevel=20}else{if(e.ZoomLevel<3){e.ZoomLevel=3}}e.Side=e.BaseTileSize*e.ZoomLevel;e.Wrapper.width(e.Side).height(e.Side);e.GenerateTiles();e.Canvas.width=e.Side;e.Canvas.height=e.Side;e.CanvasContext.clearRect(0,0,e.Side,e.Side);if(!e.IsOldIE()){e.GCanvas.width=e.Side;e.GCanvas.height=e.Side;e.GCanvasContext.clearRect(0,0,e.Side,e.Side);e.GCanvasContext.scale(e.ZoomLevel,e.ZoomLevel);e.CanvasContext.scale(e.ZoomLevel,e.ZoomLevel)}else{if(g==e.ZoomLevel){g=1}e.CanvasContext.scale(e.ZoomLevel/g,e.ZoomLevel/g)}e.SetCenter(new b.Map.Point(e.Center.x*e.ZoomLevel/g,e.Center.y*e.ZoomLevel/g));e.Draw()},GetCenter:function(g){var h=f.Sections[g];if(h){return h.GetCenter()}},ZoomIn:function(){e.Zoom++;if(e.Zoom>e.Resolutions.length){e.Zoom=e.Resolutions.length;return false}e.CheckMaxZoom();e.SetZoom(e.Resolutions[e.Zoom-1]/100);return true},ZoomOut:function(){e.Zoom--;if(e.Zoom<=0){e.Zoom=1;return false}e.SetZoom(e.Resolutions[e.Zoom-1]/100);return true},Translate:function(h){if(e.TranslatePos.x>0){e.TranslatePos.x=(e.Wrapper.outerWidth(true)<e.Container.outerWidth(true)?(e.Container.outerWidth(true)-e.Wrapper.outerWidth(true))/2:0);h=false}else{if(e.TranslatePos.x+e.Wrapper.outerWidth(true)-e.Container.outerWidth(true)<0){e.TranslatePos.x=e.Container.outerWidth(true)-e.Wrapper.outerWidth(true);h=false}}if(e.TranslatePos.y>0){e.TranslatePos.y=(e.Wrapper.outerHeight(true)<e.Container.outerHeight(true)?(e.Container.outerHeight(true)-e.Wrapper.outerHeight(true))/2:0);h=false}else{if(e.TranslatePos.y+e.Wrapper.outerHeight(true)-e.Container.outerHeight(true)<0){e.TranslatePos.y=e.Container.outerHeight(true)-e.Wrapper.outerHeight(true);h=false}}e.Wrapper.css("left",e.TranslatePos.x+"px").css("top",e.TranslatePos.y+"px");if(!h){var g=new b.Map.Point(e.Container.outerWidth(true)/2,e.Container.outerHeight(true)/2);var i=new b.Map.Point(e.Wrapper.outerWidth(true)/2,e.Wrapper.outerHeight(true)/2);e.Center=new b.Map.Point(g.x-i.x-e.TranslatePos.x,g.y-i.y-e.TranslatePos.y)}},SetCenter:function(i){e.Center=i;var g=new b.Map.Point(e.Container.outerWidth(true)/2,e.Container.outerHeight(true)/2);var h=new b.Map.Point(e.Wrapper.outerWidth(true)/2,e.Wrapper.outerHeight(true)/2);e.TranslatePos=new b.Map.Point(g.x-h.x-i.x,g.y-h.x-i.y);e.Translate(true)},Draw:function(){for(var g in f.Sections){var h=f.Sections[g];if(h.hasOwnProperty("Draw")){h.Draw()}}},RGBToHex:function(j,i,h){if(j>255||i>255||h>255){throw"Invalid Color Component"}return((j<<16)|(i<<8)|h).toString(16)},HexToRGB:function(h){var g=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(h);return g?{r:parseInt(g[1],16),g:parseInt(g[2],16),b:parseInt(g[3],16)}:null}};var b=b||{Map:{}};b.Map.Section=function(g){d.extend(this,g);this.Quantity=0;this.MinPrice=9007199254740992;this.MaxPrice=0;this.MinPriceValue="";this.MaxPriceValue="";this.Style={};d.extend(this.Style,(this.Active?f.Settings.NormalStyle:f.Settings.InactiveStyle));this.Selected=false;this.Mappings=[];this.Coords=[];this.Markers=[];var h=this;d.each(this.Coordinates,function(j,i){h.Coords.push(new b.Map.Point(i[0],i[1]))});delete this.Coordinates;this.GetOpaqueColor=function(k,i){if(i==1){return k}else{var j=e.HexToRGB(k);k="rgba("+j.r+","+j.g+","+j.b+","+i+")";return k}};this.Draw=function(){this.DrawOnContext(e.CanvasContext,this.Style);if(!e.IsOldIE()){this.DrawOnContext(e.GCanvasContext,{fillColor:this.GhostColor,fillOpacity:1})}};this.IsStyleChanged=function(i){if(this.Style.fillColor==i.fillColor&&this.Style.fillOpacity==i.fillOpacity&&this.Style.strokeColor==i.strokeColor&&this.Style.strokeWeight==i.strokeWeight){return false}return true};this.GetCenter=function(){var i=0,k=0,j=0;d.each(this.Coords,function(l,m){j++;i+=m.x*e.ZoomLevel;k+=m.y*e.ZoomLevel});i=i/j;k=k/j;return new b.Map.Point(i,k)};this.GetCorner=function(r,i){if(i=="Dynamic"){return r}var k=0;var t=null;var j=100000;var n=500*e.ZoomLevel;var s=500*e.ZoomLevel;switch(i){case"TopRight":s=-s;break;case"TopLeft":n=-n;s=-s;break;case"BottomLeft":n=-n;break}var q=10000,o=0,p=10000,m=0;d.each(this.Coords,function(v,w){if(w.x<q){q=w.x}else{if(w.x>o){o=w.x}}if(w.y<p){p=w.y}else{if(w.y>m){m=w.y}}var u=Math.sqrt(Math.pow(w.x-(r.x+n),2)+Math.pow(w.y-(r.y+s),2));if(u<j){j=u;t=new b.Map.Point((w.x*e.ZoomLevel)+e.TranslatePos.x,(w.y*e.ZoomLevel)+e.TranslatePos.y)}});var l=5;if(o-q>20||m-p>20){t={x:r.x,y:r.y};l=-5}switch(i){case"TopRight":t.y+=l;t.x-=l;break;case"TopLeft":t.y+=l;t.x+=l;break;case"BottomLeft":t.y-=l;t.x+=l;break;default:t.y-=l;t.x-=l;break}return t};this.AddMarker=function(i,j,m){if(!j){j=this.GetCenter()}if(!m){m={x:0,y:0}}var k=this;var l=new Image();l.src=i;l.onload=function(){k.Markers.push({Image:l,Point:j,Adjustment:m});k.DrawMarkers()}};this.DrawMarkers=function(){d.each(this.Markers,function(j,i){e.CanvasContext.drawImage(i.Image,((i.Point.x-i.Image.width)/e.ZoomLevel)-i.Adjustment.x,((i.Point.y-i.Image.height)/e.ZoomLevel)-i.Adjustment.y,i.Image.width/e.ZoomLevel,i.Image.height/e.ZoomLevel)})};this.RemoveMarker=function(j){for(var i=0;i<this.Markers.length;i++){if(this.Markers[i].Point.x==j.x&&this.Markers[i].Point.y==j.y){this.Markers.splice(i,1);break}}this.Clear(e.CanvasContext);this.DrawOnContext(e.CanvasContext,this.Style)};this.SetStyle=function(i){if(!this.IsStyleChanged(i)){return}if(e.IsOldIE()){d.extend(this.Style,i);var j=document.getElementById(this.Key);if(j){j.filled=(this.Style.fillOpacity>0);if(typeof(j.fill)!=undefined&&j.fill!=null){j.fill.opacity=(this.Style.fillOpacity*100)+"%"}j.fillcolor=this.Style.fillColor;j.strokecolor=this.Style.strokeColor;j.strokeweight=this.Style.strokeWeight;j.stroked=(this.Style.strokeWeight>0)}}else{this.Clear(e.CanvasContext);d.extend(this.Style,i);this.DrawOnContext(e.CanvasContext,this.Style)}};this.Clear=function(i){i.save();i.globalCompositeOperation="destination-out";this.DrawOnContext(e.CanvasContext,{fillColor:"#FFFFFF",strokeColor:"#FFFFFF",strokeWeight:this.Style.strokeWeight,fillOpacity:1});i.restore()};this.DrawOnContext=function(k,j){k.save();k.beginPath();k.moveTo(this.Coords[0].x,this.Coords[0].y);for(var i=0;i<this.Coords.length;i++){k.lineTo(this.Coords[i].x,this.Coords[i].y)}k.closePath();if(e.IsOldIE()){k.fillStyle=this.GetOpaqueColor(j.fillColor,j.fillOpacity);k.lineWidth=j.strokeWeight/e.ZoomLevel;k.strokeStyle=j.strokeColor;k.stroke(true,e.CallbackFunctionId,this.Key)}else{if(j.fillOpacity>0){k.fillStyle=this.GetOpaqueColor(j.fillColor,j.fillOpacity);k.fill()}if(j.strokeWeight>0){k.lineWidth=j.strokeWeight/e.ZoomLevel;k.strokeStyle=j.strokeColor;k.stroke()}}if(this.Markers.length>0&&j.fillColor!=this.GhostColor){this.DrawMarkers()}k.restore()};this.SetGhostColor=function(){this.GhostColor="#"+("000"+(Math.random()*(1<<24)|0).toString(16)).substr(-6)}};b.Map.Point=function(g,h){this.x=g;this.y=h};d.fn.tuMap=function(g){if(f[g]!=null){if(typeof(f[g])=="function"){return f[g].apply(this,Array.prototype.slice.call(arguments,1))}else{return f[g]}}else{if(typeof g==="object"||!g){return f.Initialize.apply(this,arguments)}else{d.error("Method "+g+" does not exist")}}};var a={init:function(){this.browser=this.searchString(this.dataBrowser)||"Unknown";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"Unknown"},searchString:function(k){for(var g=0;g<k.length;g++){var h=k[g].string;var j=k[g].prop;this.versionSearchString=k[g].versionSearch||k[g].identity;if(h){if(h.indexOf(k[g].subString)!=-1){return k[g].identity}}else{if(j){return k[g].identity}}}},searchVersion:function(h){var g=h.indexOf(this.versionSearchString);if(g==-1){return}return parseFloat(h.substring(g+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"}]};a.init();d.fn.disableSelection=function(){return this.each(function(){d(this).attr("unselectable","on").css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=function(){return false}})})}})(jQuery);